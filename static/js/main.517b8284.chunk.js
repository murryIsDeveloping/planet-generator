(this["webpackJsonpray-lightyear"]=this["webpackJsonpray-lightyear"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),s=n(68),c=n.n(s),o=(n(94),n(5)),u=n(143),l=n(134),h=n(135),f=n(130),d=n(24),p=n(118),m=n(44),v=n(119),b=n(120),g=n(144),y=function(){var e=new p.a(!1),t=new m.a,n=Object(v.a)(document,"keydown").pipe(Object(b.a)((function(e){return"Space"===e.code})),Object(g.a)((function(e){return e.preventDefault()})));return{userTyping:function(t){return e.next(t)},userTap:function(e){return t.next(e)},typing$:e.asObservable(),spaceBar$:n,tap$:t.asObservable()}}(),j=n(140),O=n(82),w=n(14),x=n(136),k=n(141),E={prefix:["","Planet ","Quadrant "],postfix:[""," World"," Land"],name:[].concat(["Murry","Jemaine","Bret","Dave","Eugene","Jim","Mel","Greg"],["Darth Vader","Leia","Rey","Luke Skywalker","Obi-Wan Kenobi","Yoda","Chewbacca","Han Solo","RD-D2","C3P0","Jar Jar Binks"],["Rick","Morty","Summer","Beth","Jerry","Sqanchy","Jessica"])},S={prefix:"",postfix:"",exclude:new Set},N=function(e){return function(t){return Object(w.a)(Object(w.a)({},t),{},{prefix:e+t.prefix})}},R=function(e){return function(t){return Object(w.a)(Object(w.a)({},t),{},{postfix:t.postfix+e})}},C={0:R("!"),7:(a="Earth",function(e){return Object(w.a)(Object(w.a)({},e),{},{exclude:new Set([].concat(Object(O.a)(Array.from(e.exclude)),[a]))})}),A:R(" Land"),D:N("Sm"),E:Object(x.a)(N("[ "),R(" ]"))};function D(e){var t=E[e];return t[Math.floor(Math.random()*t.length)]}function M(e){var t=function(e){return e.split("").map((function(e){return C[e.toUpperCase()]||k.a})).reduce((function(e,t){return t(e)}),S)}(e),n=Object(j.a)(t.prefix)?D("prefix"):t.prefix,a=Object(j.a)(t.postfix)?D("postfix"):t.postfix;return n+function e(t){var n=D("name");return t.has(n)?e(t):n}(t.exclude)+a}var L=n(1),T=n(3),A=n(70),B=n.n(A),I=function(){function e(t,n){Object(L.a)(this,e),this.noise=void 0,this.noiseScale=void 0,this.noise=new B.a(t),this.noiseScale=n}return Object(T.a)(e,[{key:"set",value:function(e){return this.noise.noise3D(e.x*this.noiseScale,e.y*this.noiseScale,e.z*this.noiseScale)/2+.5}}]),e}(),P=(n(65),function(){function e(t){Object(L.a)(this,e),this.value=t}return Object(T.a)(e,[{key:"next",value:function(){for(var e=0,t=btoa(this.value),n=0;n<t.length;n++){var a=t.charCodeAt(n);e+=a>=90?.99999:a<=32?1e-5:(a-32)/58}var r=e%1,i=r.toString();return this.value+=i[i.length-1],r}}]),e}());var z=n(11);function F(e){return new z.a(16777215*e.next())}function $(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0,a=[];n<1;){n+=e.next()/t;var r=F(e);a.push({offset:n>1?1:n,color:r})}return a}function W(e){return{metalness:.4*e.next(),opacity:e.next()/2+.3,roughness:1*e.next(),flatShading:!0,transparent:!0,color:F(e)}}function H(e){return{opacity:e.next(),roughness:2*e.next(),flatShading:!0,transparent:!0,color:F(e)}}function J(e){return{metalness:e.next(),opacity:.9,roughness:2*e.next(),flatShading:!0,transparent:!0,color:new z.a(3355443)}}function q(e,t){return{metalness:.5*t,roughness:1*e.next(),flatShading:!0,color:F(e),vertexColors:!0}}function U(e,t){return{terrain:q(e,t.metalic),water:W(e),ring:H(e),blackhole:J(e)}}var G=n(121),_=n(122),K=n(123),V=function(e){var t=new P(e.name.toUpperCase());return Object(w.a)(Object(w.a)({},function(e,t){var n=function(t){return function(n){return t(e.next()*n)}},a={metalic:n(k.a),noiseScale:n(k.a),detail:n(Math.floor),waterDetail:n(Math.floor),height:n(k.a),radius:n(Object(G.a)(1)),waterRadiusDif:n(k.a),ring:n(Object(_.a)(.5)),water:n(Object(_.a)(.5)),waterOpacity:n(k.a),ringOpacity:n(k.a),ringRadiusDif:n(k.a),ringSize:n(k.a)};return Object(K.a)(a,t)}(t,e)),{},{materials:U(t,e),colors:$(t)})},Q=function(){function e(t){Object(L.a)(this,e),this.planetConfig=t,this.name=this.planetConfig.name,this.price=0,this.status=void 0,this.seed=new P(this.name.toUpperCase()),this.style=void 0,this.resources={liquid:0,gas:0,minerals:0,ring:0},this.calculate()}return Object(T.a)(e,[{key:"calculate",value:function(){this.setStatus(),"Not Found"!==this.status&&(this.style=V(this.planetConfig),this.calculateDetails())}},{key:"setStatus",value:function(){if(this.planetConfig.status)this.status=this.planetConfig.status;else{var e=this.seed.next();this.status=e<this.planetConfig.supernovaPercent?"Supernova'd":e<this.planetConfig.soldPercent?"Sold":"For Sale"}}},{key:"calculateDetails",value:function(){this.resources=this.calculateResources(),this.price=this.calculatePrice(this.resources)}},{key:"calculateResources",value:function(){var e=this.style.materials.water.opacity,t=this.style.materials.ring.opacity,n=this.style.water&&e>=.5,a=this.style.water&&e<.5,r=this.style.waterRadiusDif+2*this.style.height;return{liquid:n?r:0,gas:a?r:0,minerals:this.calculateMinerals(),ring:this.style.ring?t/2*this.style.ringSize:0}}},{key:"calculateMinerals",value:function(){var e=this.style.colors.length/8,t=this.style.radius;return 3*this.style.materials.terrain.metalness*e*t/2}},{key:"calculatePrice",value:function(e){return 1e4*Math.round(100*(e.gas+e.liquid+5*e.minerals+e.ring)*this.planetConfig.price)}},{key:"resourceLevel",value:function(e){var t=this.resources[e];return t<.2?"None":t<.4?"Low":t<.6?"Medium":t<.8?"High":"Very High"}}]),e}(),Y=n(124),X=function(e){return function(t){return Object(w.a)(Object(w.a)({},t),{},{prefix:e+t.prefix})}},Z=function(e){return function(t){return Object(w.a)(Object(w.a)({},t),{},{postfix:t.postfix+e})}},ee=function(e,t){return Object(K.a)(Object(o.a)({},e,Object(Y.a)(t)))},te={0:Z("!"),1:ee("ring",1.2),2:ee("water",.7),3:ee("radius",.7),4:ee("price",.7),5:ee("price",1.4),6:ee("metalic",1.2),7:Object(K.a)({detail:Object(Y.a)(1.3),waterDetail:Object(Y.a)(1.3),price:Object(Y.a)(1.1)}),8:ee("soldPercent",3),9:ee("supernovaPercent",5),A:Z(" Land"),B:Object(K.a)({detail:Object(Y.a)(.8),waterDetail:Object(Y.a)(.8),price:Object(Y.a)(.8)}),C:Object(K.a)({background:Object(G.a)(1)}),D:X("Sm"),E:Object(x.a)(X("[ "),Z(" ]"),Object(K.a)({detail:Object(Y.a)(.5)})),F:Object(K.a)({price:Object(Y.a)(.9),water:Object(Y.a)(1.1),waterRadiusDif:Object(G.a)(.2)})};function ne(e,t){return function(e){var t=e.name,n=e.prefix,a=e.postfix,r=e.validName,i=t.startsWith(n)&&t.endsWith(a);return Object(w.a)(Object(w.a)({},e),{},{status:i&&r?e.status:"Not Found"})}(t.split("").map((function(e){return te[e.toUpperCase()]||k.a})).reduce((function(e,t){return t(e)}),function(e){return{metalic:1,status:null,validName:!0,prefix:"",postfix:"",name:e,background:0,noiseScale:2,detail:30,waterDetail:30,height:.5,radius:2,waterRadiusDif:0,ring:.7,water:1,waterOpacity:1,ringOpacity:1,ringRadiusDif:1,ringSize:1,soldPercent:.25,supernovaPercent:.025,price:1}}(e)))}var ae=n(69),re=n(127),ie=n(129),se=n(142),ce=n(48),oe=n(126),ue=n(139),le=n(128),he=n(137),fe=n(125),de=n(81),pe=n(145),me=function(e){var t=M(""),n=new m.a,a=new m.a,r=Object(ae.a)(Object(se.a)(500),Object(ce.a)(fe.a),Object(oe.a)()),i=a.pipe(r,Object(ue.a)("")),s=e.tap$.pipe(Object(b.a)(Object(de.a)("generate planet"))),c=Object(re.a)(e.spaceBar$,s).pipe(Object(le.a)(e.typing$),Object(b.a)((function(e){var t=Object(d.a)(e,2);t[0];return!t[1]})),Object(le.a)(i),Object(ce.a)(pe.a),Object(ce.a)(M)),o=Object(re.a)(n.pipe(r),c).pipe(Object(ue.a)(t));return{setName:function(e){return n.next(e)},setDimension:function(e){return a.next(e)},planet$:Object(ie.a)([o,i]).pipe(Object(ce.a)((function(e){var t=Object(d.a)(e,2);return ne(t[0],t[1])})),Object(ce.a)((function(e){return new Q(e)})),Object(he.a)(1)),planetName$:o}}(y),ve=n(64),be=Object(f.a)((function(e){return{search:Object(o.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ve.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ve.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1)}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"}}})),ge=n(138),ye=n(132);function je(){var e=be(),t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],s=n[1];return i.a.createElement("div",{className:e.search},i.a.createElement("div",{className:e.searchIcon},i.a.createElement(ye.a,null)),i.a.createElement(ge.a,{placeholder:"Dimension",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"Search Dimensions"},onChange:function(e){var t=e.target.value;(/^[0-9a-f]+$/.test(t)||""===t)&&(s(t),me.setDimension(t))},onFocus:function(){return y.userTyping(!0)},onBlur:function(){return y.userTyping(!1)},value:a}))}var Oe=n(133);function we(){var e=be(),t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){var e=me.planetName$.subscribe(s);return function(){return e.unsubscribe()}}),[]),i.a.createElement("div",{className:e.search},i.a.createElement("div",{className:e.searchIcon},i.a.createElement(Oe.a,null)),i.a.createElement(ge.a,{placeholder:"Planet",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"Search Planets"},onChange:function(e){var t=e.target.value;s(t),me.setName(t)},onFocus:function(){return y.userTyping(!0)},onBlur:function(){return y.userTyping(!1)},value:a}))}var xe=Object(f.a)((function(e){return{root:{flexGrow:1},title:{fontSize:"30px",fontFamily:["Anton","san-serif"].join(","),textAlign:"left",width:"100%"}}}));function ke(){var e=xe();return i.a.createElement(i.a.Fragment,null,i.a.createElement("header",{className:e.root},i.a.createElement(u.a,{position:"static"},i.a.createElement(l.a,null,i.a.createElement(h.a,{className:e.title,variant:"h6",noWrap:!0},"Ray Lightyear"),i.a.createElement(we,null),i.a.createElement(je,null)))))}var Ee,Se=n(75);!function(e){e.TERRAIN="terrain",e.WATER="water",e.RING="ring",e.BLACKHOLE="black hole"}(Ee||(Ee={}));var Ne=function(){function e(){Object(L.a)(this,e),this.style=void 0}return Object(T.a)(e,[{key:"mesh",value:function(e,t){switch(this.style=t,e){case"Not Found":return[];case"Supernova'd":return[this.blackHoleMesh()];default:return this.planetMesh()}}},{key:"planetMesh",value:function(){var e=[this.terrainMesh()];return this.style.water&&e.push(this.waterMesh()),this.style.ring&&e.push(this.ringMesh()),e}},{key:"terrainMesh",value:function(){var e=new z.c(this.style.radius,this.style.detail);this.generateTerrain(e),this.paintTerrain(e);var t=new z.e(this.style.materials.terrain);e.elementsNeedUpdate=!0;var n=new z.d(e,t);return n.name=Ee.TERRAIN,n}},{key:"waterMesh",value:function(){var e=this.style.radius+this.style.waterRadiusDif,t=new z.c(e,this.style.waterDetail),n=new z.e(this.style.materials.water),a=new z.d(t,n);return a.name=Ee.WATER,a}},{key:"ringMesh",value:function(){var e=this.style.radius+this.style.ringRadiusDif+.5,t=new z.i(e,this.style.ringSize,3,15),n=new z.e(this.style.materials.ring),a=new z.d(t,n);return a.rotation.y+=.2,a.rotation.x+=1.4,a.name=Ee.RING,a}},{key:"blackHoleMesh",value:function(){var e=new z.j(1,.3,100,20,9,8),t=new z.e(this.style.materials.blackhole),n=new z.d(e,t);return n.name=Ee.BLACKHOLE,n}},{key:"faceLength",value:function(e,t){var n=function(n){return e.vertices[t[n]].length()};return(n("a")+n("b")+n("c"))/3}},{key:"generateTerrain",value:function(e){var t=this,n=new I(this.style.name.toUpperCase(),this.style.noiseScale);e.vertices.forEach((function(e){var a=n.set(e);e.setLength(t.newLength(a))}))}},{key:"newLength",value:function(e){return 2*(e-.5)*this.style.height+this.style.radius}},{key:"originalLength",value:function(e){return(e-this.style.radius)/2/this.style.height+.5}},{key:"paintTerrain",value:function(e){var t,n=this,a=Object(Se.a)(e.faces);try{var r=function(){var a=t.value,r=n.faceLength(e,a),i=n.originalLength(r),s=n.style.colors.find((function(e){return e.offset>=i})).color;a.color=s};for(a.s();!(t=a.n()).done;)r()}catch(i){a.e(i)}finally{a.f()}}}]),e}(),Re=n(76),Ce=n.n(Re),De=n(77),Me=n.n(De),Le=n(78),Te=n.n(Le),Ae=n(79),Be=n.n(Ae),Ie=n(80),Pe=n.n(Ie),ze=[Ce.a,Me.a,Te.a,Be.a,Pe.a],Fe=new(function(){function e(){Object(L.a)(this,e),this.init=!1,this.scene=new z.g,this.renderer=new z.k,this.camera=new z.f(75,1,.1,1e3),this.mesh=[],this.superNovaMesh=void 0,this.meshRenderer=new Ne,this.backgroundImage=void 0}return Object(T.a)(e,[{key:"createScene",value:function(e){this.init=!0,this.setBackground(0),this.camera.position.z=6,this.renderer.setSize(window.innerWidth,window.innerHeight),e.appendChild(this.renderer.domElement);var t=new z.b(16777215,.95);t.position.set(0,2,2).normalize(),this.scene.add(t),this.animate()}},{key:"setBackground",value:function(e){var t=ze[e%ze.length];if(t!==this.backgroundImage){var n=(new z.h).load(t);this.scene.background=n,this.backgroundImage=t}}},{key:"addPlanet",value:function(e){var t=this;if(this.removeActiveMesh(),"Not Found"!==e.status){this.setBackground(e.style.background),this.mesh=this.meshRenderer.mesh(e.status,e.style),this.mesh.forEach((function(e){return t.scene.add(e)}));var n=window.innerWidth,a=n,r=Math.min(n/2-80,window.innerHeight-75),i=n>=960?r:a;this.renderer.domElement.style.width="".concat(i,"px"),this.renderer.domElement.style.height="".concat(i,"px")}}},{key:"removeActiveMesh",value:function(){var e=this;this.mesh.forEach((function(t){return e.scene.remove(t)}))}},{key:"animate",value:function(){var e=this,t=function t(){requestAnimationFrame(t),e.mesh.forEach((function(e){e.name!==Ee.TERRAIN&&e.name!==Ee.WATER||(e.rotation.y+=.005),e.name!==Ee.RING&&e.name!==Ee.BLACKHOLE||(e.rotation.z+=.005)})),e.renderer.render(e.scene,e.camera)};t()}}]),e}()),$e=function(e){var t=Object(r.useState)(),n=Object(d.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){var t=e.subscribe(i);return function(){return t.unsubscribe()}}),[e]),a},We=Object(f.a)((function(e){return{wrapper:{overflow:"hidden",position:"relative"},banner:{position:"absolute",fontSize:"45px",textTransform:"uppercase",backgroundColor:"red",color:"white",transform:"rotate(-40deg)",padding:"20px 150px",top:"70px",left:"-135px",width:"200px",textAlign:"center",fontFamily:["Anton","san-serif"].join(",")}}}));function He(){var e=We(),t=Object(r.useRef)(null),n=$e(me.planet$);return t.current&&!Fe.init&&Fe.createScene(t.current),n&&Fe.addPlanet(n),i.a.createElement("div",{className:e.wrapper,onTouchEnd:function(e){return y.userTap("generate planet")}},i.a.createElement("div",{className:e.banner},null===n||void 0===n?void 0:n.status),i.a.createElement("div",{ref:t}))}var Je=Object(f.a)((function(e){return{details:{padding:"30px",letterSpacing:"3px"},title:{fontSize:"34px"},resources:{listStyle:"none",fontSize:"20px"},resource:{textTransform:"capitalize",fontWeight:"bold"}}}));function qe(){var e=Je(),t=$e(me.planet$),n="Not Found"===(null===t||void 0===t?void 0:t.status)||"Supernova'd"===(null===t||void 0===t?void 0:t.status),a=n?null:i.a.createElement("h2",{className:e.title},"$",null===t||void 0===t?void 0:t.price.toLocaleString()),r=n?null:i.a.createElement("ul",{className:e.resources},["minerals","liquid","gas","ring"].map((function(n,a){return i.a.createElement("li",{key:a,className:e.resource},n,": ",null===t||void 0===t?void 0:t.resourceLevel(n))})));return i.a.createElement("div",{className:e.details},i.a.createElement("h1",{className:e.title},null===t||void 0===t?void 0:t.name),a,i.a.createElement("h2",null,function(e,t){switch(e){case"Not Found":return"I'm afriad that ".concat(t," can't be found");case"Supernova'd":return"".concat(t," has Supernova'd. Now it looks like it may just be the beginings of a black hole");default:return"".concat(e)}}(null===t||void 0===t?void 0:t.status,null===t||void 0===t?void 0:t.name)),r)}var Ue=Object(f.a)((function(e){return{planet:Object(o.a)({display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"auto 80px"},e.breakpoints.down("sm"),{display:"flex",flexDirection:"column"}),spaceBarMessage:{backgroundColor:"#ddd",padding:"20px",textAlign:"center",gridColumnStart:1,gridColumnEnd:3,cursor:"pointer"}}}));var Ge=function(){var e=Ue();return i.a.createElement("div",null,i.a.createElement(ke,null),i.a.createElement("div",{className:e.planet},i.a.createElement(He,null),i.a.createElement(qe,null),i.a.createElement("aside",{className:e.spaceBarMessage,onClick:function(){return y.userTap("generate planet")}},'Click the "Space" Bar to randomly search through some of our planets!')))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,t,n){e.exports=n.p+"static/media/bg_0.710cfcbb.jpg"},77:function(e,t,n){e.exports=n.p+"static/media/bg_1.52bbd2e3.jpg"},78:function(e,t,n){e.exports=n.p+"static/media/bg_2.b03cbffa.jpg"},79:function(e,t,n){e.exports=n.p+"static/media/bg_3.83d9eaaa.jpg"},80:function(e,t,n){e.exports=n.p+"static/media/bg_4.7faada7a.jpg"},89:function(e,t,n){e.exports=n(100)},94:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.517b8284.chunk.js.map